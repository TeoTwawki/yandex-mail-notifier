1) Херня в том, что у нас есть:
    - куки для проверки авторизации
    - получение токена
    - сокеты для обновчений
    
И возможны следующие ситуации:
1) куки могут быть, но токен не удалось получить
2) куки, токен есть, не удалось замутить сокет
3) сокет отвалился из-за ошибка
4) сокет надо переподключить из-за таймаута